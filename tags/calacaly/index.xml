<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>calacaly on DevOps Camp</title><link>https://www.devopscamp.cc/tags/calacaly/</link><description>Recent content in calacaly on DevOps Camp</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Fri, 20 Jan 2023 22:34:14 +0800</lastBuildDate><atom:link href="https://www.devopscamp.cc/tags/calacaly/index.xml" rel="self" type="application/rss+xml"/><item><title>cobra 实战扩展练习</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra-exercise/cobra-exercise/</link><pubDate>Fri, 20 Jan 2023 22:34:14 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra-exercise/cobra-exercise/</guid><description>cobra 实战扩展联系 本练习不属于基础知识点， 不保证一定会进行讲解。 如果有时间， 我一定（挖坑）。 1. Linux 命令行模拟 本题由 机智的程序员小熊 提供。 一共两个命令， 并且提供了两篇非常详细的公众号文章进行解释。从 golang 原生的 flag 开始介绍， 一直到 cobra。 非常的详细， 很值得一看。 参考源码地址: minibear2333/cmd_utils - Github 这是一个</description></item><item><title>Cobra07 - 命令行自动补全 （简单）</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra07-completion/cobra07-completion/</link><pubDate>Thu, 19 Jan 2023 22:47:01 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra07-completion/cobra07-completion/</guid><description>Cobra07 - 命令行自动补全 （简单） 提示 文档在官网 作业要求 作业要求 模拟 kubectl 实现一个带有 多子命令 及 多参数 的命令。 并根据官网提示， 在自己的命令终端实现 补全 功能 提示: 不用实现具体功能， 在 Run() 中打印一句话就行了。 解题思路 用cobra生成的命令行程序，默认有completion功能提示，查看提示 按提示执</description></item><item><title>Cobra06 - 持久化任务与参数</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra06-presistent/cobra06-persistent/</link><pubDate>Wed, 18 Jan 2023 22:47:01 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra06-presistent/cobra06-persistent/</guid><description>Cobra06 - 持久化任务与参数 （简单） 提示 1 2 3 4 5 6 7 8 9 func main() { root := cobra.Command{ PersistentPreRun: func(cmd *cobra.Command, args []string) {}, PersistentPostRun: func(cmd *cobra.Command, args []string) {}, } root.PersistentFlags() } 作业要求 在 cobra 中提供了 Persistent Run 和 Flag， 作用是什么？ 父子孙命令之间， 是否具有继承关系？ 优先级是什么？ 自己想一段功能实现。 并论证。 解题思路 查看cobra官网文档 https://cobra.dev/ 其中PreRun and PostRun Hooks这</description></item><item><title>Cobra05 - 子命令及子命令参数 （简单）</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra05-subcommand/cobra05-subcommand/</link><pubDate>Tue, 17 Jan 2023 22:54:13 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra05-subcommand/cobra05-subcommand/</guid><description>Cobra05 - 子命令及子命令参数 （简单） 提示 考虑 零值 要求 在 04 的基础上， 增加子命令 Address 增加 Gender 和 Account 两个参数。 默认账户余额 Account 100。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Usage: greeting [command] Available Commands: address completion Generate the autocompletion script for the specified shell help Help about any command Flags: --account int 账户余额 (default 100) --age int 年龄 (default 20) --gender 性别 -h, --help help for greeting --name string 用户名 Use &amp;#34;greeting [command] --help&amp;#34; for more information about a command. 增加 家庭住址子命令</description></item><item><title>cobra04 - 项目工程目录结构（简单）</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra04-layout/cobra04-layout/</link><pubDate>Mon, 16 Jan 2023 22:34:14 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202302-a/cobra04-layout/cobra04-layout/</guid><description>Cobra04 - 项目工程目录结构（简单） 提示 阅读 golang项目结构 h 提示： 这个标准是一个 建议， 开源社区大多循序此标准， **自己写代码， 可以遵循）。 而在不同的公司， 可能因为各种原因， 有自己的标准。 作业要求 将 作业: cobra - 01 实现编译与参数绑定 进行改造， 改造完成后符合工程目录 参考建议 1 2 3 4 5 6 7 8</description></item><item><title>作业: cobra - 01 实现编译与参数绑定</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra01/cobra01/</link><pubDate>Fri, 13 Jan 2023 15:19:07 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra01/cobra01/</guid><description>作业: cobra - 01 实现编译与参数绑定 要求: 使用 https://github.com/spf13/cobra 实现命令工具 命令具有以下参数 --name 姓名 --age 年龄 如果年龄为空， 默认为 20 岁。 完成交叉编译脚本， 编译其他平台的二进制文件 -rwxr-xr-x 1 franktang staff 4220672 Jan 13 15:35 greeting-darwin-amd64 -rwxr-xr-x 1 franktang staff 4203442 Jan 13 15:35 greeting-darwin-arm64 -rwxr-xr-x 1 franktang staff 4215010 Jan 13 15:35 greeting-linux-amd64 -rwxr-xr-x 1 franktang staff 4157892 Jan 13 15:35 greeting-linux-arm64 执行输出效果如下 1 2 3 4 5 $ ./out/greeting-darwin-arm64 你好, 今年 20 岁 $ ./out/greeting-darwin-arm64 --age 30 --name zhangsan zhangsan</description></item><item><title>作业: cobra - 02 读取配置配置文件</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra02/cobra02/</link><pubDate>Fri, 13 Jan 2023 15:19:07 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra02/cobra02/</guid><description>作业: cobra - 02 读取配置配置文件 要求: 使用 https://github.com/spf13/cobra 实现命令工具 命令具有以下参数 --config , -c 配置文件 配置文件如下 1 2 3 # config.yml name: zhangsan age: 20 将配置文件保存为 JSON 格式 1 $ cat config.json 输出结果 1 2 3 4 { &amp;#34;name&amp;#34;:&amp;#34;zhangsan&amp;#34;, &amp;#34;age&amp;#34;: 20 } 解题思路 学习带有配置文件的参数绑定 Bind Flags with Config 1 2 3 4 5 6 7 8 9 10 //You can also bind your flags with viper: var author string func init() { rootCmd.PersistentFlags().StringVar(&amp;amp;author, &amp;#34;author&amp;#34;, &amp;#34;YOUR NAME&amp;#34;, &amp;#34;Author name for copyright attribution&amp;#34;) viper.BindPFlag(&amp;#34;author&amp;#34;, rootCmd.PersistentFlags().Lookup(&amp;#34;author&amp;#34;))</description></item><item><title>作业: cobra - 03 交互式命令</title><link>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra03/cobra03/</link><pubDate>Fri, 13 Jan 2023 15:19:07 +0800</pubDate><guid>https://www.devopscamp.cc/posts/semi-plan/users/calacaly/202301-b/cobra03/cobra03/</guid><description>作业: cobra - 03 交互式命令 要求: 使用 https://github.com/spf13/cobra 实现命令工具 使用 https://github.com/go-survey/survey 实现交互式命令 实现 Demo 效果 解题思路 学习survey Input 1 2 3 4 5 name := &amp;#34;&amp;#34; prompt := &amp;amp;survey.Input{ Message: &amp;#34;ping&amp;#34;, } survey.AskOne(prompt, &amp;amp;name) Select 1 2 3 4 5 6 color := &amp;#34;&amp;#34; prompt := &amp;amp;survey.Select{ Message: &amp;#34;Choose a color:&amp;#34;, Options: []string{&amp;#34;red&amp;#34;, &amp;#34;blue&amp;#34;, &amp;#34;green&amp;#34;}, } survey.AskOne(prompt, &amp;amp;color) 具体实现参考cmd/root.go</description></item></channel></rss>